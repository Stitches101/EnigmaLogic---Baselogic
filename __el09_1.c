
//#include "variadef.h"
//#include "__el01.h"
//**********************************************************************************************************************************************//
//Main Function EL09_01: tworamp
//**********************************************************************************************************************************************//
void el09_1_libenigma01(EL09_1_LIBENIGMA01 *io)
{
	//Variable Input
	//**************************************************************************//
	FL in01 = 0, in02 = 0, in03 = 0, in04 = 0, in05 = 0, in06 = 0;

	//Variable Output
	//**************************************************************************//
	FL ou01 = 0, ou02 = 0;

	//Variable Local
	//**************************************************************************//


	//Read Input & Output
	//**************************************************************************//
	in01 = *io->Input01, in02 = *io->Input02, in03 = *io->Input03, in04 = *io->Input04, in05 = *io->Input05, in06 = *io->Input06;
	ou01 = *io->Output01, ou02 = *io->Output02;

	//Initialization
	//**************************************************************************//
	if (PLUGIN_GetStartFlag())
	{
		*io->__s01 = 0;
	}
	//Conditions
	//**************************************************************************//

	//Calculations
	//**************************************************************************//
	twoRamp(&in01, &in02, &in03, &in04, &in05, &in06, &ou01, &ou02, io->__s01);

	//Write Output
	//**************************************************************************//
	*io->Output01 = ou01, *io->Output02 = ou02;
}
//**********************************************************************************************************************************************//
//Main Function EL09_02: threeramp
//**********************************************************************************************************************************************//
void el09_2_libenigma01(EL09_2_LIBENIGMA01 *io)
{	//Variable Input
	//**************************************************************************//
	FL in01 = 0, in02 = 0, in03 = 0, in04 = 0, in05 = 0, in06 = 0, in07 = 0, in08 = 0;

	//Variable Output
	//**************************************************************************//
	FL ou01 = 0, ou02 = 0;

	//Variable Local
	//**************************************************************************//


	//Read Input & Output
	//**************************************************************************//
	in01 = *io->Input01, in02 = *io->Input02, in03 = *io->Input03, in04 = *io->Input04, in05 = *io->Input05, in06 = *io->Input06, in07 = *io->Input07, in08 = *io->Input08;
	ou01 = *io->Output01, ou02 = *io->Output02;

	//Initialization
	//**************************************************************************//
	if (PLUGIN_GetStartFlag())
	{
		*io->__s01 = 0;
	}
	//Conditions
	//**************************************************************************//


	//Calculations
	//**************************************************************************//
	threeRamp(&in01, &in02, &in03, &in04, &in05, &in06, &in07, &in08, &ou01, &ou02, io->__s01);

	//Write Output
	//**************************************************************************//
	*io->Output01 = ou01, *io->Output02 = ou02;
}
//**********************************************************************************************************************************************//
//Main Function EL09_03: timeswitch2
//**********************************************************************************************************************************************//
void el09_3_libenigma01(EL09_3_LIBENIGMA01 *io)
{

	//Variable Input
	//**************************************************************************//
	ULI in02 = 0, in03 = 0;
	BIT in01 = 0;

	//Variable Output
	//**************************************************************************//
	ULI ou01 = 0, ou02 = 0;
	BIT ou03 = 0, ou04 = 0, ou05 = 0;

	//Variable Local
	//**************************************************************************//


	//Read Input & Output
	//**************************************************************************//
	in01 = *io->Input01, in02 = *io->Input02, in03 = *io->Input03;
	ou01 = *io->Output01, ou02 = *io->Output02, ou03 = *io->Output03, ou04 = *io->Output04, ou05 = *io->Output05;

	//Initialization
	//**************************************************************************//
	if (PLUGIN_GetStartFlag())
	{
		*io->__s01 = 0, *io->__s02 = 0, *io->__s03 = 0;
	}
	//Calculations
	//**************************************************************************//
	timeSwitch2(&in01, &in02, &in03, &ou01, &ou02, &ou03, &ou04, &ou05, io->__s01, io->__s02, io->__s03);

	//Write Output
	//**************************************************************************//
	*io->Output01 = ou01, *io->Output02 = ou02, *io->Output03 = ou03, *io->Output04 = ou04, *io->Output05 = ou05;
}
//**********************************************************************************************************************************************//
//Main Function - EL09_04:PI REGELSYSTEM
//**********************************************************************************************************************************************//
void el09_4_libenigma01(EL09_4_LIBENIGMA01 *io)
{

	//Variable Input
	//**************************************************************************//
	FL in01 = 0, in02 = 0, in03 = 0, in04 = 0, in05 = 0, in06 = 0, in08 = 0, in09 = 0;
	BIT in07 = 0;

	//Variable Output
	//**************************************************************************//
	FL ou01 = 0, ou02 = 0, ou03 = 0, ou04 = 0, ou05 = 0, ou06 = 0, ou07 = 0, ou08 = 0, ou09 = 0, ou10 = 0, ou11 = 0, ou12 = 0;

	//Variable Local
	//**************************************************************************//
	

	//Read Input & Output
	//**************************************************************************//
	
	in01 = *io->Input01, in02 = *io->Input02, in03 = *io->Input03, in04 = *io->Input04, in05 = *io->Input05, in06 = *io->Input06, in07 = *io->Input07, in08 = *io->Input08, in09 = *io->Input09;
	ou01 = *io->Output01, ou02 = *io->Output02, ou03 = *io->Output03, ou04 = *io->Output04, ou05 = *io->Output05, ou06 = *io->Output06, ou07 = *io->Output07, ou08 = *io->Output08, ou09 = *io->Output09, ou10 = *io->Output10,
		ou11 = *io->Output11, ou12 = *io->Output12;

	//Initialization
	//**************************************************************************//
	if (PLUGIN_GetStartFlag())
	{
		*io->__s01 = 0, *io->__s02 = 0, *io->__s03 = 0, *io->__s04 = 0;
	}
	
	//Calculations
	//**************************************************************************//
	/*proportionalIntegrator(&in01, &in02, &in03, &in04, &in05, &in06, &in07, &in08, &in09,
		&ou01, &ou02, &ou03, &ou04, &ou05, &ou06, &ou07, &ou08, &ou09, &ou10, &ou11,
		io->__s02, io->__s03, io->__s04);*/

	/*bovenstaand proces uitgezet wegens een probleem met het stoppen van processen in regelaar 23-06-2021*/

	//Write Output
	//**************************************************************************//
	*io->Output01 = ou01, *io->Output02 = ou02, *io->Output03 = ou03, *io->Output04 = ou04, *io->Output05 = ou05, *io->Output06 = ou06, *io->Output07 = ou07, *io->Output08 = ou08, *io->Output09 = ou09, *io->Output10 = ou10,
		*io->Output11 = ou11, *io->Output12 = ou12;
}
//**********************************************************************************************************************************************//
//Main Function - EL09_05: PI Regler Heating/Cooling
//**********************************************************************************************************************************************//
void el09_5_libenigma01(EL09_5_LIBENIGMA01 *io)
{

	//Variable Input
	//**************************************************************************//
	FL in01 = 0, in02 = 0, in03 = 0, in04 = 0, in05 = 0, in06 = 0, in09 = 0, in10 = 0, in11 = 0;
	BIT in07 = 0, in08 = 0;

	//Variable Output
	//**************************************************************************//
	FL ou01 = 0, ou02 = 0, ou03 = 0, ou04 = 0, ou05 = 0, ou06 = 0, ou07 = 0, ou08 = 0, ou09 = 0, ou10 = 0, ou11 = 0, ou12 = 0;

	//Variable Local
	//**************************************************************************//
	FL y01 = 0, y02 = 0, y03 = 0, y04 = 0, y05 = 0, y06 = 0, y07 = 0, y08 = 0, y09 = 0, y10 = 0, y11 = 0;


	//Initialization
	//**************************************************************************//
	if (PLUGIN_GetStartFlag())
	{
		*io->__s01 = 0, *io->__s02 = 0, *io->__s03 = 0, *io->__s04 = 0;
	}

	//Read Input & Output
//**************************************************************************//

	in01 = *io->Input01, in02 = *io->Input02, in03 = *io->Input03, in04 = *io->Input04, in05 = *io->Input05, in06 = *io->Input06, in07 = *io->Input07, in08 = *io->Input08, in09 = *io->Input09, in10 = *io->Input10, in11 = *io->Input11;
	ou01 = *io->Output01, ou02 = *io->Output02, ou03 = *io->Output03, ou04 = *io->Output04, ou05 = *io->Output05, ou06 = *io->Output06, ou07 = *io->Output07, ou08 = *io->Output08, ou09 = *io->Output09, ou10 = *io->Output10,
		ou11 = *io->Output11, ou12 = *io->Output12;

	//Start
	//**************************************************************************//
	y01 = in09 / 2;
	y02 = in03 + y01;
	y03 = in03 - y01;
	y11 = 1000;

	//Cool
	//**************************************************************************//
	if (in08 == 1 && y09 == 0)
	{
		y06 = 0 - in01;
		y07 = 0 - in03;
		twoRamp(&y06, &y11, &y07, &y07, &y02, &y03, &y04, &y05, io->__s01);
		proportionalIntegrator(&y06, &y11, &y05, &in04, &in05, &in06, &in07, &in10, &in11,
			&ou01, &ou02, &ou03, &ou04, &ou05, &ou06, &ou07, &ou08, &ou09, &ou10, &ou11,
			io->__s02, io->__s03, io->__s04);
		y08 = 0 - y05;

		y09 = 1;//cleanswitch
	}
	if (in08 == 1 && y09 == 1)
	{
		y06 = 0 - in01;
		y07 = 0 - in03;
		twoRamp(&y06, &in02, &y07, &y07, &y02, &y03, &y04, &y05, io->__s01);
		proportionalIntegrator(&y06, &in02, &y05, &in04, &in05, &in06, &in07, &in10, &in11,
			&ou01, &ou02, &ou03, &ou04, &ou05, &ou06, &ou07, &ou08, &ou09, &ou10, &ou11,
			io->__s02, io->__s03, io->__s04);
		y08 = 0 - y05;

	}
	if (in08 == 0)
	{
		y09 = 0;//cleanswitch
	}
	//Heat
	//**************************************************************************//
	if (in08 == 0 && y10 == 0)
	{
		y06 = in01;
		y07 = in03;
		twoRamp(&y06, &y11, &y07, &y07, &y03, &y02, &y04, &y05, io->__s01);
		proportionalIntegrator(&y06, &y11, &y05, &in04, &in05, &in06, &in07, &in10, &in11,
			&ou01, &ou02, &ou03, &ou04, &ou05, &ou06, &ou07, &ou08, &ou09, &ou10, &ou11,
			io->__s02, io->__s03, io->__s04);
		y08 = y05;
		y10 = 1;//cleanswitch
	}
	if (in08 == 0 && y10 == 1)
	{
		y06 = in01;
		y07 = in03;
		twoRamp(&y06, &in02, &y07, &y07, &y03, &y02, &y04, &y05, io->__s01);
		proportionalIntegrator(&y06, &in02, &y05, &in04, &in05, &in06, &in07, &in10, &in11,
			&ou01, &ou02, &ou03, &ou04, &ou05, &ou06, &ou07, &ou08, &ou09, &ou10, &ou11,
			io->__s02, io->__s03, io->__s04);
		y08 = y05;
	}
	if (in08 == 1)
	{
		y10 = 0;//cleanswitch
	}

	//Write Output
	//**************************************************************************//
	*io->Output01 = ou01, *io->Output02 = ou02, *io->Output03 = ou03, *io->Output04 = ou04, *io->Output05 = ou05, *io->Output06 = ou06, *io->Output07 = ou07, *io->Output08 = ou08, *io->Output09 = ou09, *io->Output10 = ou10,
		*io->Output11 = ou11, *io->Output12 = y08;
}
//**********************************************************************************************************************************************//
//Main Function - EL09_06: PI 0-100% setpoint maker
//**********************************************************************************************************************************************//
void el09_6_libenigma01(EL09_6_LIBENIGMA01 *io)
{

	//Variable Input
	//**************************************************************************//
	FL in01 = 0, in02 = 0, in03 = 0;

	//Variable Output
	//**************************************************************************//
	FL ou01 = 0;

	//Initialization
//**************************************************************************//
	if (PLUGIN_GetStartFlag())
	{
		*io->__s01 = 0, *io->__s02 = 0, *io->__s03 = 0, *io->__s04 = 0;
	}

	//Read Input
	//**************************************************************************//
	in01 = *io->Input01;
	in02 = *io->Input02;
	in03 = *io->Input03;

	//Calculation7
	//**************************************************************************//
	proportionalIntegratorEL(&in01, &in02, &in03, &ou01, io->__s01, io->__s02, io->__s03, io->__s04);// Memory
	//Write Output
	//**************************************************************************//
	*io->Output01 = ou01;
}
//**********************************************************************************************************************************************//
//Main Function - EL09_08: Sunscreen System
//**********************************************************************************************************************************************//
void el09_8_libenigma01(EL09_8_LIBENIGMA01 *io)
{
	//Variable Input
	//**************************************************************************//
	FL in01 = 0, in02 = 0, in08 = 0, in09 = 0, in10 = 0, in11 = 0, in12 = 0, in13 = 0;
	BIT in03 = 0, in04 = 0, in05 = 0, in06 = 0, in07 = 0, in14 = 0, in15 = 0, in16 = 0;

	//Variable Output
	//**************************************************************************//
	FL ou01 = 0, ou02 = 0, ou04 = 0, ou06 = 0;
	BIT ou03 = 0, ou05 = 0, ou07 = 0, ou08 = 0, ou09 = 0;

	//Variable Local
	//**************************************************************************//
	FL x01 = 0, x02 = 0, x07 = 0, x09 = 0;
	BIT x03 = 0, x04 = 0, x08 = 0, x05 = 0, x06 = 0, x10 = 0;

	//Read Input & Output
	//**************************************************************************//
	in01 = *io->Input01, in02 = *io->Input02, in03 = *io->Input03, in04 = *io->Input04, in05 = *io->Input05, in06 = *io->Input06, in07 = *io->Input07, in08 = *io->Input08, in09 = *io->Input09, in10 = *io->Input10,
		in11 = *io->Input11, in12 = *io->Input12, in13 = *io->Input13, in14 = *io->Input14, in15 = *io->Input15, in16 = *io->Input16;
	ou01 = *io->Output01, ou02 = *io->Output02, ou03 = *io->Output03, ou04 = *io->Output04, ou05 = *io->Output05, ou06 = *io->Output06, ou07 = *io->Output07, ou08 = *io->Output08, ou09 = *io->Output09;

	//Initialization
	//**************************************************************************//
	if (PLUGIN_GetStartFlag())
	{
		*io->__s01 = 0, *io->__s02 = 0, *io->__s03 = 0, *io->__s04 = 0, *io->__s05 = 0, *io->__s06 = 0, *io->__s07 = 0, *io->__s08 = 0, *io->__s09 = 0;
		*io->__r03 = 0, *io->__r04 = 0;
	}

	//Manual system
	//**************************************************************************//

	//Start
	//**************************************************************************//
	if ((in01 >= in02) && (in03 == 0 && in04 == 0 && in05 == 1 && in07 == 0 && in08 < in09 && *io->__r04 == 0))
	{
			x04 = 1;
	}
	else
	{
			x04 = 0;
	}
	//Timer
	//**************************************************************************//
	timeSwitch(&x04, &in10, &in11, &x01, &x02, &x03, io->__s01, io->__s02, io->__s05);
	//Block Function
	//**************************************************************************//
	if (in07 == 1 || in08 >= in09 || in03 == 1 || *io->__r04 == 1)
	{
		x03 = 0;
		if (*io->__r03 < 1800)
		{
			*io->__r03 += 1;
			*io->__r04 = 1;
		}
		else
		{
			*io->__r03 = 0;
			*io->__r04 = 0;
		}
	}
	else
	{
		*io->__r03 = 0;
		*io->__r04 = 0;
	}
	//Manual software
	//**************************************************************************//
	if ((in06 == 1) && (in03 == 0 && in04 == 0 && in05 == 1 && in07 == 0 && in08 < in09 && *io->__r04 == 0))
	{
		x03 = 1;
	}
	//Timer 2
	//**************************************************************************//
	timeSwitchBit2(&x03, &in12, &x08, &x09, io->__s04, io->__s09);
	timeSwitchBit(&x08, &in13, &x05, &x06, &x07, &x10, io->__s03, io->__s06, io->__s07, io->__s08);
	//Swipe
	//**************************************************************************//

	//Set Output
	//**************************************************************************//

	ou01 = x01;
	ou02 = x02;
	ou03 = x03;
	ou04 = x09;
	ou05 = x08;
	ou06 = x07;
	ou07 = x05;
	ou08 = x06;
	ou09 = x10;

	//Write Output
	//**************************************************************************//
	*io->Output01 = ou01, *io->Output02 = ou02, *io->Output03 = ou03, *io->Output04 = ou04, *io->Output05 = ou05, *io->Output06 = ou06, *io->Output07 = ou07, *io->Output08 = ou08, *io->Output09 = ou09;
}
//**********************************************************************************************************************************************//
//Main Function - EL09_09: Sunscreen System 2
//**********************************************************************************************************************************************//
//void el09_9_libenigma01(EL09_9_LIBENIGMA01 *io)
//{
//	//Variable Input
//	//**************************************************************************//
//	FL in01 = 0, in02 = 0, in08 = 0, in09 = 0, in10 = 0, in11 = 0, in12 = 0, in13 = 0;
//	BIT in03 = 0, in04 = 0, in05 = 0, in06 = 0, in07 = 0, in14 = 0, in15 = 0, in16 = 0;
//
//	//Variable Output
//	//**************************************************************************//
//	FL ou01 = 0, ou02 = 0, ou04 = 0, ou06 = 0;
//	BIT ou03 = 0, ou05 = 0, ou07 = 0, ou08 = 0, ou09 = 0;
//
//	//Variable Local
//	//**************************************************************************//
//	FL x01 = 0, x02 = 0, x07 = 0, x09 = 0;
//	BIT x03 = 0, x04 = 0, x08 = 0, x05 = 0, x06 = 0, x10 = 0;
//
//	//Read Input & Output
//	//**************************************************************************//
//	in01 = *io->Input01, in02 = *io->Input02, in03 = *io->Input03, in04 = *io->Input04, in05 = *io->Input05, in06 = *io->Input06, in07 = *io->Input07, in08 = *io->Input08, in09 = *io->Input09, in10 = *io->Input10,
//		in11 = *io->Input11, in12 = *io->Input12, in13 = *io->Input13, in14 = *io->Input14, in15 = *io->Input15, in16 = *io->Input16;
//	ou01 = *io->Output01, ou02 = *io->Output02, ou03 = *io->Output03, ou04 = *io->Output04, ou05 = *io->Output05, ou06 = *io->Output06, ou07 = *io->Output07, ou08 = *io->Output08, ou09 = *io->Output09;
//
//	//Initialization
//	//**************************************************************************//
//	if (PLUGIN_GetStartFlag())
//	{
//		*io->__s01 = 0, *io->__s02 = 0, *io->__s03 = 0, *io->__s04 = 0, *io->__s05 = 0, *io->__s06 = 0, *io->__s07 = 0, *io->__s08 = 0, *io->__s09 = 0;
//		*io->__r03 = 0, *io->__r04 = 0;
//	}
//	//IAS Status
////**************************************************************************//
//	if ()
//	{
//		status = 6;
//		*io->__r01 = 1;
//	}
//	else if (in04 == 1 || in05 == 0)
//	{
//		status = 1;
//	}
//	else if (in07 == 1 || in08 >= in09 || in03 == 1)
//	{
//		status = 2;
//	}
//	else if ()
//	{
//		status = 3;
//	}
//	else if (in06 == 1 && in05 == 1)
//	{
//		status = 4;
//	}
//	else if ((in01 >= in02) && in05 == 1)
//	{
//		status = 5;
//	}
//	else
//	{
//		status = 0;
//	}
//
//	//IAS Switch
//	//**************************************************************************//
//	switch (status)
//	{
//	case 1:
//		ou13 = status;
//		x04 = 0;
//		break;
//	case 2:
//		x04 = 0;
//		break;
//	case 3:
//		break;
//	case 4:
//		break;
//	case 5:
//		ou13 = status;
//		x04 = 1;
//		break;
//	case 5:
//		ou13 = status;
//		break;
//	default:
//		ou13 = status;
//		break;
//	}
//	timeSwitch(&x04, &in10, &in11, &ou01, &ou02, &x03, io->__s01, io->__s02, io->__s05);
//	timeSwitchBit2(&x03, &in12, &x08, &ou04, io->__s04, io->__s09);
//	timeSwitchBit(&x08, &in13, &ou07, &ou08, &ou06, &ou09, io->__s03, io->__s06, io->__s07, io->__s08);
//
//	ou03 = x03;
//	ou05 = x08;
//
//	//Write Output
//	//**************************************************************************//
//	*io->Output01 = ou01, *io->Output02 = ou02, *io->Output03 = ou03, *io->Output04 = ou04, *io->Output05 = ou05, *io->Output06 = ou06, *io->Output07 = ou07, *io->Output08 = ou08, *io->Output09 = ou09;
//}

//**********************************************************************************************************************************************//
//Main Function - EL09_10: Y fucntion
//**********************************************************************************************************************************************//
void el09_10_libenigma01(EL09_10_LIBENIGMA01 *io)
{
	//Variable Input
	//**************************************************************************//
	FL in01, in02, in03, in04;

	//Variable Output
	//**************************************************************************//
	FL ou01, ou02, ou03;

	//Variable Local
	//**************************************************************************//
	FL x01 = 0, x02 = 0, x03 = 0, x04 = 0, x05 = 0, x06 = 0, x07 = 0, x08 = 0, x09 = 0, x10 = 0,
		x11 = 0, x12 = 0, x13 = 0;

	FL flow = 0;
	FL nu01 = 0;
	FL min = 0;
	FL max = 0;


	//Read Input & Output
	//**************************************************************************//
	in01 = *io->Input01, in02 = *io->Input02, in03 = *io->Input03, in04 = *io->Input04;
	ou01 = *io->Output01, ou02 = *io->Output02, ou03 = *io->Output03;

	//Initialization
	//**************************************************************************//
	if (PLUGIN_GetStartFlag())
	{
		*io->__s01 = 0, *io->__s02 = 0, *io->__s03 = 0;
	}

	//Calculations Y Factor
	//**************************************************************************//
	x01 = (in01 / in02 - 1);
	x02 = (in03 / 100);
	x03 = (1 - x02);
	x04 = (x02 / x03);
	x05 = (exp(x01 * x04) - 1);
	x06 = (exp(x01 * x04) * (in01 / in02) - 1);
	x07 = (x05 / x06 * 100);
	x08 = (in01 / in02);

	//Calculations Re Circulation Air
	//**************************************************************************//
	flow = 100;
	min = 0;
	max = 100;

	
	twoRamp(&in04, &flow, &min, &min, &max, &in02, &nu01, &ou03, io->__s01);

	//Min Max
	//**************************************************************************//
	if (ou03 > in01)
	{
		ou03 = in01;
	}
	else if (ou03 < min)
	{
		ou03 = min;
	}


	//Set Output
	//**************************************************************************//
	ou01 = x07;
	ou02 = x08;

	//Write Output
	//**************************************************************************//
	*io->Output01 = ou01, *io->Output02 = ou02, *io->Output03 = ou03;
}








